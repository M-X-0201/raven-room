<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Iris World</title>

  <style>
    :root {
      --bg1: #fbfbff;  /* 浅色背景 */
      --bg2: #f3f5ff;  /* 更浅背景 */
      --card: rgba(255, 255, 255, .70);  /* 卡片背景 */
      --text: #2b2f45;  /* 文字颜色 */
      --muted: #7a7f9f;  /* 默认文字颜色 */
      --book-shelf-bg: #f4f6fc; /* 书架背景 */
    }

    [data-theme="dark"] {
      --bg1: #121212;  /* 深色背景 */
      --bg2: #1e1e1e;  /* 更暗背景 */
      --card: rgba(255, 255, 255, 0.10);  /* 卡片背景 */
      --text: #f2f3ff;  /* 文字颜色 */
      --muted: #9aa0c6;  /* 默认文字颜色 */
      --book-shelf-bg: #2d2d2d; /* 书架背景 */
    }

    body {
      margin: 0;
      font-family: system-ui, -apple-system, "PingFang SC", "Microsoft YaHei";
      background: var(--bg1);
      color: var(--text);
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
    }

    .shell {
      width: 100%;
      max-width: 1200px;  /* 最大宽度 */
      margin: 0 auto;
      display: flex;
      justify-content: space-between;
      gap: 20px;
      flex-wrap: wrap;
    }

    .rightCol .card {
      background-color: var(--book-shelf-bg);
      padding: 10px;
      overflow-y: auto;
      max-height: 350px;
      border-radius: var(--radiusM);
    }

    @media (max-width: 768px) {
      .shell {
        flex-direction: column;  /* 手机端竖排布局 */
        gap: 10px;
      }

      .rightCol .card {
        max-height: 300px;  /* 手机端适当减小高度 */
        overflow-y: auto;  /* 启用滚动条 */
      }
    }

    .focusQuote {
      padding: 12px 8px;
      background: var(--card);
      border-radius: var(--radiusM);
      color: var(--text);
    }

    .bubble {
      background: linear-gradient(180deg, var(--card), rgba(255,255,255,.04));
      position: fixed;
      bottom: 16px;
      right: 16px;
      width: 300px;
      padding: 10px;
      box-shadow: var(--shadow);
      display: none;
      z-index: 10;
    }

    /* 深浅模式的自动适应 */
    @media (prefers-color-scheme: dark) {
      :root {
        --bg1: #121212;
        --text: #f2f3ff;
      }
    }

    @media (prefers-color-scheme: light) {
      :root {
        --bg1: #fbfbff;
        --text: #2b2f45;
      }
    }
  </style>
</head>
<body>

  <div class="shell">
    <div class="leftCard">
      <h1>Iris World</h1>
      <div class="focusQuote">
        <div class="fqTop">
          <div class="fqLabel">专注语</div>
        </div>
        <div class="fqText" id="focusQuoteText">准备好了就开始吧。你只需要先走一步。</div>
      </div>

      <button class="btn" id="startBtn">开始</button>

      <div class="settingsRow">
        <div class="setting">
          <label>专注</label>
          <input id="focusMin" type="number" value="25" min="1" />
          <span>分钟</span>
        </div>

        <div class="setting">
          <label>休息</label>
          <input id="breakMin" type="number" value="5" min="1" />
          <span>分钟</span>
        </div>
      </div>
    </div>

    <div class="rightCol">
      <div class="card">
        <h2>书架</h2>
        <a href="fanfic/密语.pdf" target="_blank">阅读《密语》</a>
        <a href="fanfic/北国之旅.pdf" target="_blank">阅读《北国之旅》</a>
      </div>

      <div class="card">
        <h2>今日鸢尾便签</h2>
        <div class="notePaper">
          <p id="noteMain">“先把自己照顾好，世界才有意义。”</p>
          <p id="noteSrc">—— 出处占位</p>
        </div>
      </div>
    </div>
  </div>

  <script>
    // 自动跟随系统主题
    const pools = [
      {
        id: "cathy",
        showName: false,
        name: "",
        lines: [
          "你做得到。我一直都相信。",
          "别把自己局限住。",
          "难过也没关系。",
          "深渊也可以是向上的。",
          "我会为你骄傲。"
        ]
      },
      {
        id: "blaise",
        showName: true,
        name: "Blaise",
        lines: [
          "开始。别拖延。",
          "你比你想象的稳定。",
          "专注是优势。",
          "继续。"
        ]
      },
      {
        id: "sarah",
        showName: true,
        name: "Sarah",
        lines: [
          "慢一点也没关系。",
          "你在向光走。",
          "呼吸一下。"
        ]
      },
      {
        id: "noah",
        showName: true,
        name: "Noah",
        lines: [
          "嘿天才，先做五分钟。",
          "行动救你。",
          "别发呆。"
        ]
      }
    ];

    const focusQuoteText = document.getElementById("focusQuoteText");

    // 更新专注语
    function refreshFocusQuote() {
      const pool = pools[Math.floor(Math.random() * pools.length)];
      const text = pool.lines[Math.floor(Math.random() * pool.lines.length)];
      focusQuoteText.textContent = text;
    }

    // 计时器控制
    let focusTime = 25 * 60;  // 默认专注时长 25 分钟（秒）
    let breakTime = 5 * 60;   // 默认休息时长 5 分钟（秒）

    document.getElementById("focusMin").addEventListener("input", function() {
      focusTime = parseInt(this.value) * 60;
    });

    document.getElementById("breakMin").addEventListener("input", function() {
      breakTime = parseInt(this.value) * 60;
    });

    // 计时器开始
    document.getElementById("startBtn").addEventListener("click", function() {
      startTimer(focusTime);
    });

    function startTimer(duration) {
      let timer = duration;
      let interval = setInterval(function() {
        let minutes = Math.floor(timer / 60);
        let seconds = timer % 60;
        document.getElementById("timeText").textContent = `${minutes}:${seconds < 10 ? '0' + seconds : seconds}`;
        if (timer <= 0) {
          clearInterval(interval);
          startTimer(breakTime);  // 专注结束后开始休息计时
        }
        timer--;
      }, 1000);
    }
  </script>

</body>
</html>
